// Code generated by protoc-gen-go-psm. DO NOT EDIT.

package test_spb

import (
	psm "github.com/pentops/protostate/psm"
)

// State Query Service for %sBar
// QuerySet is the query set for the Bar service.

type BarPSMQuerySet = psm.StateQuerySet[
	*GetBarRequest,
	*GetBarResponse,
	*ListBarsRequest,
	*ListBarsResponse,
	*ListBarEventsRequest,
	*ListBarEventsResponse,
]

func NewBarPSMQuerySet(
	smSpec psm.QuerySpec[
		*GetBarRequest,
		*GetBarResponse,
		*ListBarsRequest,
		*ListBarsResponse,
		*ListBarEventsRequest,
		*ListBarEventsResponse,
	],
	options psm.StateQueryOptions,
) (*BarPSMQuerySet, error) {
	return psm.BuildStateQuerySet[
		*GetBarRequest,
		*GetBarResponse,
		*ListBarsRequest,
		*ListBarsResponse,
		*ListBarEventsRequest,
		*ListBarEventsResponse,
	](smSpec, options)
}

type BarPSMQuerySpec = psm.QuerySpec[
	*GetBarRequest,
	*GetBarResponse,
	*ListBarsRequest,
	*ListBarsResponse,
	*ListBarEventsRequest,
	*ListBarEventsResponse,
]

func DefaultBarPSMQuerySpec(tableSpec psm.QueryTableSpec) BarPSMQuerySpec {
	return psm.QuerySpec[
		*GetBarRequest,
		*GetBarResponse,
		*ListBarsRequest,
		*ListBarsResponse,
		*ListBarEventsRequest,
		*ListBarEventsResponse,
	]{
		QueryTableSpec: tableSpec,
		ListRequestFilter: func(req *ListBarsRequest) (map[string]interface{}, error) {
			filter := map[string]interface{}{}
			if req.TenantId != nil {
				filter["tenant_id"] = *req.TenantId
			}
			return filter, nil
		},
		ListEventsRequestFilter: func(req *ListBarEventsRequest) (map[string]interface{}, error) {
			filter := map[string]interface{}{}
			filter["bar_id"] = req.BarId
			return filter, nil
		},
	}
}
